% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Tarif_cubage.R
\name{cubage}
\alias{cubage}
\title{Estime le volume marchand sans écorce de chacun des arbres avec l'équation de Fortin et al. (2007)}
\usage{
cubage(
  fic_arbres,
  mode_simul = "DET",
  nb_iter = 1,
  nb_step = 1,
  seed_value = NULL
)
}
\arguments{
\item{fic_arbres}{Une table contenant la liste d'arbres regroupés en placettes avec les informations suivantes:
\itemize{
   \item id_pe: identifiant unique de la placette
   \item dhpcm: dhp (cm) de l'arbre ou classe de dhp (>9 cm)
   \item essence: code d'essence de l'arbre (ex: SAB, EPN, BOP)
   \item no_arbre: identifiant de l'arbre ou de la combinaison dhp/essence
   \item hauteur_pred: hauteur de l'arbre (m)
   \item iter: numéro de l'itération, seulement si mode stochastique, doit être numéroté de 1 à nb_iter
   \item step: numéro de la step, seulement si mode stochastique, doit être numéroté de 1 à nb_step. Obligatoire même si le fichier n'est qu'une liste d'arbres à un moment donné.
}}

\item{mode_simul}{Mode de simulation (STO = stochastic, DET = deterministic), par défaut "DET"}

\item{seed_value}{Optionnel. La valeur du seed pour la génération de nombres aléatoires. Généralement utilisé pour les tests de la fonction.}
}
\value{
La table \code{fic_arbres} avec une colonne contenant le volume marchand estimé en dm3 (vol_dm3).
}
\description{
Estime le volume marchand sans écorce de chacun des arbres avec l'équation de Fortin et al. (2007). La fonction permet l'estimation pour une liste d'arbres regroupés en placette.
L'estimation peut être déterministe ou stochastique.
}
\details{
L'équation pour estimer le volume marchand a été étalonnée avec un modèle linéaire mixte où l'essence est une covariable dans l'équation (Fortin et al. (2007).
Le modèle inclut un effet aléatoire de placette et et un effet alétoire de virée, mais seul l'effet aléatoire de placette est simulé en mode stochastique.
La fonction estime le volume de façon déterministe ou stochastique.

Fortin, M., J. DeBlois, S. Bernier et G. Blais, 2007. Mise au point d’un tarif de cubage général pour
les forêts québécoises : une approche pour mieux évaluer l’incertitude associée aux prévisions.
For. Chron. 83: 754-765.
}
\examples{
# Exemple 1: DETERMINISTE: une seule année par arbre ----------------------------------------
# Estimer la hauteur et ensuite le volume
DataHt <- relation_h_d(fic_arbres=fic_arbres_test)
DataHtVol <- cubage(fic_arbres=DataHt)

# Exemple 2: DETERMINISTE: plusieurs années par arbre -------------------------------------
# Estimer la hauteur et ensuite le volume
DataHt <- relation_h_d(fic_arbres=fic_artemis_det, grouping_vars = 'annee')
DataHtVol <- cubage(fic_arbres=DataHt)

# Exemple 3: STOCHASTIQUE: plusieurs itérations et plusieurs step -------------------------------
nb_iter <- length(unique(fic_artemis_sto$iter)) # 10
nb_step <- length(unique(fic_artemis_sto$annee)) # 5
ht <- relation_h_d(fic_arbres=fic_artemis_sto, mode_simul='STO', nb_iter=nb_iter, nb_step=nb_step)
vol <- cubage(fic_arbres=ht, mode_simul='STO', nb_iter=nb_iter, nb_step=nb_step)

}
